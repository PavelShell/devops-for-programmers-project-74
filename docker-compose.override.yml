services:
    app:
        extends:
            file: docker-compose.yml
            service: app
        ports:
            - "8000:8000"
        command: ["bash", "-c", "sleep 3 && npm start"]
        volumes:
            - "./app:/app"
        build:
            dockerfile: Dockerfile
    db:
        extends:
            file: docker-compose.yml
            service: db
    caddy:
        image: caddy
        ports:
            - "80:80"
            - "443:443"
            - "443:443/udp"
        volumes:
            - "./services/caddy:/config"
        depends_on: [app]
